{"version":3,"file":"trainingExecutions-BNuLzgy3.js","sources":["../../src/api/trainingExecutions.ts"],"sourcesContent":["import { supabase } from '../lib/supabase'\nimport type {\n  TrainingExecution,\n  TrainingExecutionInsert,\n  TrainingExecutionUpdate,\n  TrainingExecutionWithPlan,\n} from '../types/database'\n\nexport async function getTrainingExecutions(): Promise<TrainingExecutionWithPlan[]> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .select('*, training_plans(*)')\n    .order('created_at', { ascending: false })\n\n  if (error) throw error\n  return data ?? []\n}\n\nexport async function getTrainingExecution(id: number): Promise<TrainingExecution | null> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .select('*')\n    .eq('id', id)\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function getTrainingExecutionsByPlanId(planId: number): Promise<TrainingExecution[]> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .select('*')\n    .eq('plan_id', planId)\n    .order('created_at', { ascending: false })\n\n  if (error) throw error\n  return data ?? []\n}\n\nexport async function getTrainingExecutionsByDateRange(\n  startDate: string,\n  endDate: string\n): Promise<TrainingExecutionWithPlan[]> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .select('*, training_plans(*)')\n    .gte('completed_at', startDate)\n    .lte('completed_at', endDate)\n    .order('completed_at', { ascending: true })\n\n  if (error) throw error\n  return data ?? []\n}\n\nexport async function createTrainingExecution(\n  execution: TrainingExecutionInsert\n): Promise<TrainingExecution> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .insert(execution)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\nexport async function deleteTrainingExecution(id: number): Promise<void> {\n  const { error } = await supabase.from('training_executions').delete().eq('id', id)\n\n  if (error) throw error\n}\n\nexport async function updateTrainingExecution(\n  id: number,\n  execution: TrainingExecutionUpdate\n): Promise<TrainingExecution> {\n  const { data, error } = await supabase\n    .from('training_executions')\n    .update(execution)\n    .eq('id', id)\n    .select()\n    .single()\n\n  if (error) throw error\n  return data\n}\n\n// 통계 계산 함수들\nexport function calculateStats(executions: TrainingExecution[]) {\n  if (executions.length === 0) {\n    return {\n      totalSessions: 0,\n      totalUnits: 0,\n      totalDuration: 0,\n      avgDuration: 0,\n      avgDurationPerUnit: 0,\n    }\n  }\n\n  const totalSessions = executions.length\n  const totalUnits = executions.reduce((sum, e) => sum + e.unit_count, 0)\n  const totalDuration = executions.reduce((sum, e) => sum + e.duration_seconds, 0)\n  const avgDuration = totalDuration / totalSessions\n  const avgDurationPerUnit = totalUnits > 0 ? totalDuration / totalUnits : 0\n\n  return {\n    totalSessions,\n    totalUnits,\n    totalDuration,\n    avgDuration,\n    avgDurationPerUnit,\n  }\n}\n"],"names":[],"mappings":";AAQA,eAAsB,wBAA8D;AAClF,QAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SAC3B,KAAK,qBAAqB,EAC1B,OAAO,sBAAsB,EAC7B,MAAM,cAAc,EAAE,WAAW,OAAO;AAE3C,MAAI,MAAO,OAAM;AACjB,SAAO,QAAQ,CAAA;AACjB;AAEA,eAAsB,qBAAqB,IAA+C;AACxF,QAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SAC3B,KAAK,qBAAqB,EAC1B,OAAO,GAAG,EACV,GAAG,MAAM,EAAE,EACX,OAAA;AAEH,MAAI,MAAO,OAAM;AACjB,SAAO;AACT;AAEA,eAAsB,8BAA8B,QAA8C;AAChG,QAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,qBAAqB,EAC1B,OAAO,GAAG,EACV,GAAG,WAAW,MAAM,EACpB,MAAM,cAAc,EAAE,WAAW,OAAO;AAE3C,MAAI,MAAO,OAAM;AACjB,SAAO,QAAQ,CAAA;AACjB;AAiBA,eAAsB,wBACpB,WAC4B;AAC5B,QAAM,EAAE,MAAM,UAAU,MAAM,SAC3B,KAAK,qBAAqB,EAC1B,OAAO,SAAS,EAChB,OAAA,EACA,OAAA;AAEH,MAAI,MAAO,OAAM;AACjB,SAAO;AACT;AAEA,eAAsB,wBAAwB,IAA2B;AACvE,QAAM,EAAE,MAAA,IAAU,MAAM,SAAS,KAAK,qBAAqB,EAAE,OAAA,EAAS,GAAG,MAAM,EAAE;AAEjF,MAAI,MAAO,OAAM;AACnB;AAEA,eAAsB,wBACpB,IACA,WAC4B;AAC5B,QAAM,EAAE,MAAM,MAAA,IAAU,MAAM,SAC3B,KAAK,qBAAqB,EAC1B,OAAO,SAAS,EAChB,GAAG,MAAM,EAAE,EACX,OAAA,EACA,OAAA;AAEH,MAAI,MAAO,OAAM;AACjB,SAAO;AACT;AAGO,SAAS,eAAe,YAAiC;AAC9D,MAAI,WAAW,WAAW,GAAG;AAC3B,WAAO;AAAA,MACL,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,aAAa;AAAA,MACb,oBAAoB;AAAA,IAAA;AAAA,EAExB;AAEA,QAAM,gBAAgB,WAAW;AACjC,QAAM,aAAa,WAAW,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,YAAY,CAAC;AACtE,QAAM,gBAAgB,WAAW,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,kBAAkB,CAAC;AAC/E,QAAM,cAAc,gBAAgB;AACpC,QAAM,qBAAqB,aAAa,IAAI,gBAAgB,aAAa;AAEzE,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;"}